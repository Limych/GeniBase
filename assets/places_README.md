# Справочный ресурс по теме

[Указатель волостей (гмин), станов и городов Российской империи с обозначением расстояний до ближайших станций железных дорог и пароходных пристаней. - СПб., 1914](http://elib.shpl.ru/ru/indexes/values/66463)

# Формат файла

Это обычный текстовый файл, где информация записана в машиночитаемом формате. Потому, есть набор условных значков, чтобы машина понимала, где какие данные.

Запись об одном месте в максимальном варианте состоит из следующих частей:
* Название(ия) места;
* Ссылка на описание этого же места в проекте Wikidata;
* Даты существования места;
* Координаты места.
Обязательным является только название места. Все прочие поля могут отсутствовать.

Для удобства редактирования в любом месте можно вставлять дополнительные пробелы или переводы строк: машина все пробелы и переводы строк всегда воспринимает как единичный пробел. Они нужны больше для удобства людей.

## Как это всё кодируется для машины

* Название пишется обычным текстом, как есть. Если вариантов названий несколько, они либо перечисляются через запятую (или точку с запятой), либо используя скобки.  
Примеры: `Вазаская (Вазасская) губерния`, `Бессарабская губерния, Бессарабская область`
* Ссылка на Wikidata всегда начинается с символов «#wd:», после чего вплотную (без пробелов!) идёт идентификатор страницы в Wikidata. Чтобы увидеть этот объект, нужно перейти на сайт по адресу https://www.wikidata.org/wiki/<идентификатор>.  
Пример: `#wd:Q1190582` — означает адрес https://www.wikidata.org/wiki/Q1190582 (Бессарабская губерния)
* Даты существования всегда пишутся в квадратных скобках (без пробелов!). Сначала указывается дата образования, потом, через слеш («/»), дата прекращения существования. Перед годом всегда пишется знак «+» (знак минус означает «до н.э.»), потом год, месяц, день. Если месяц или день неизвестны, их опускаем.  
Примеры: `[+1812-05-16/+1917-12]` (с 16 мая 1812 по дек 1917), `[+1812/]` (с 1812)
* Координаты пишутся после символа «@». Банально широта и долгота через запятую (без пробелов!). Часть координат есть в проекте Wikidata, часть придётся искать вручную. Рекомендую для этого пользовать карты Гугля http://maps.google.ru/ — там можно кликнуть правой кнопки мыши на нужном месте, выбрать пункт «Что здесь?» и в описании, среди прочего, вы получите координаты этого места практически в идеальном формате (только удалите лишние пробелы). Туда же в картах Гугля можно в поиск скопировать нужные координаты (убрав лишь символ «@» перед ними) и сразу увидеть эту точку на карте.  
Пример: `@47.005555555,28.8575`
* Если машина имеет свои предположения о значении какого-то поля, она добавляет в строку эту информацию сразу в верном формате, но предваряя поле знаком вопроса. Эти предположения не всегда верные и не обязательны к использованию. Зато сразу видно, на что есть смысл обратить внимание. Полей-предположений одного типа может быть несколько.  
Примеры: `?[+1796/]` (возможные даты существования), `?#wd:Q4130502` (возможная ссылка на википедию), `?@57.697777777,71.735833333` (возможные координаты)
* Если внутри места есть вложенные места, они перечисляются следом внутри фигурных скобок. Пример:
```
Амурская область #wd:Q4064576 [+1858/+1917] {
	Благовещенск #wd:Q6934 ?[+1756/] @50.25778,127.53639 ?@55.033333333,55.983333333
}
```



# Чем редактировать

Для работы с файлом рекомендую редактор Notepad++. Его можно бесплатно скачать по адресу https://notepad-plus-plus.org/download/

После установки, открыть любой файл на редактирование можно из проводника вызвав на нём всплывающее меню по правой кнопке мыши и выбрав там появившийся новый пункт «Edit with Notepad++»

Я написал файл настроек к редактору, который включает подсветку синтаксиса, а также позволяет сворачивать не нужные сейчас блоки информации.
Сворачивание/разворачивание блоков делается нажатием мышкой на плюсик слева от текста рядом с нумерацией строк.
Для быстрого сворачивания всех блоков удобно нажать на клавиатуре Alt+0 (ноль), после чего развернуть обратно нужные блоки.

## Включение подсветки синтаксиса

1. В редакторе в меню выбираем пункт Language > Define your language…
2. В открывшемся окне вверху нажимаем кнопку «Импорт…»
3. В открывшемся новом окне выбора файла находим файл «notepadpp_genibase_places.xml» и открываем его
4. Закрываем окно создания подсветки (крестик в верхнем правом его углу)
5. Готово



# Рекомендации по редактированию

1. Разумно двигаться сверху вниз: сначала проверить губернии, потом уезды, потом уже места в них;

2. Разумно сначала проставить все ссылки на Wikidata на одном уровне (например, все уезды), потом прогнать файл через машину (для этого переслать его мне) — так она, возможно, отсеит заведомо неверные варианты предположений. Или найдёт новые;

3. Если предложенные машиной варианты с Wikidata не подходят, разумно воспользоваться поиском на том проекте (поле в верхнем правом углу любой страницы проекта) для определения нужной страницы, после чего идентификатор страницы перенести в наш файл;

4. В случае большого числа предложений от машины, обычно проще найти объект на Wikidata и посмотреть верный вариант идентификатора;

5. Пожалуйста, обращайте внимание на простановку буквы «Ё». Рекомендуется употреблять её везде, где она должна быть. Но перепроверяйте информацию — порой встречаются неочевидные исключения (например «Царев» в Астраханской губернии).

6. На какую точку лучше ставить географическую привязку:
    * Общее правило для населённых пунктов: всегда стараемся найти максимально старую часть населённого пункта;
    * Для городов точку лучше ставить на кремль или центральную площадь;
    * Для сёл — на самую старую церковь;
    * Для регионов (уездов, волостей и т.п.) — тут есть неоднозначность. Возможно, наиболее верное решение — скопировать привязку со столицы региона (уездного города для уезда, волостного центра для волости и т.п.).
